#include "motion_control.h"

void UpdateWithoutInput(void)
{
	if (isRun)
	{
		DealRun();
	}
	if (isJump)
	{
		DealJump();
	}
	if (!isRun && !isJump)
	{
		DealIdle();
	}

	return;
}

//trx1 and try1 is the position of triangle,tr1s is the shape of the triangle
//the triwidth and trilength is the size of the triangle
//the x and the y is the guy's position
//the width and the length is the guy's size
int trx1,try1;
enum map_type{
	tl,
	tr,
	tu,
	td
};
bool CheckTheState(int x,int y)
{
        static bool state=FALSE;
		state=CheckTheTriangle(x,y,trx1,try1,shape);
		return state;
}

bool CheckTheTriangle(int x,int y,int trx1,int try1,enum map_type shape)
{
	bool tristate=FALSE;
	int nx=x-trx1,ny=y-try1;
	switch(shape)
	{
	case tl:
		if(nx<=UNIT&&((2*ny+nx)>=UNIT)&&((2*ny-nx)<=UNIT))
			tristate=TRUE;
	case tr:
		if(nx>=0&&((2*ny+nx)<=2*UNIT)&&((2*ny-nx)>=0))
			tristate=TRUE;
	case tu:
		if(ny>=0&&((ny+2*nx)<=2*UNIT)&&((ny-2*nx)<=0))
			tristate=TRUE;
	case td:
		if(ny<=UNIT&&((ny+2*nx)>=UNIT)&&((ny-2*nx)>=(-UNIT)))
			tristate=TRUE;
	default:
	}
	return tristate;
}
